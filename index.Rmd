---
title: "R Translations Status Dashbaord"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: scroll
    self_contained: false
    favicon:
    includes:
      in_header: "fragments/ganalytics.html"
      after_body: "fragments/afterInit.html"
    css: ["fragments/custom.css", "css/custom.css"]
---

```{r setup, include=FALSE}
library(flexdashboard)
library(crosstalk)
library(tidyverse)
library(htmltools)
library(plotly)
source("global_translations.R")
```

Sidebar {.sidebar data-width=200}
=====================================

```{r, echo=FALSE, results='asis'}
htmltools::includeHTML('fragments/sidebar.html')
```

Home
=====================================


Row
-------------------------------------

### Total Languages

```{r}
valueBox(total_lang, icon = "fa-language", color = "white")
```

### Translated Messages

```{r}
valueBox(total_trans_msg, icon = "fa-comment", color = "white")
```

### Untranslated Messages

```{r}
valueBox(total_untrans_msg, icon = "fa-comment-slash", color = "white")
```

### Fuzzy Messages

```{r}
valueBox(total_fuzzy_msg, icon = "fa-puzzle-piece", color = "white")
```


Row {data-height=450}
-----------------------------------------------------------------------

```{r data}
df <- SharedData$new(final_df)
```

```{r filters}

# Filter Select Input - Language
filter_select(id = "language", 
              label = "Select Translation Language",
              sharedData = df, 
              group = ~language)

```

### Graph of Translated vs Untranslated Messages || <small> Per Language </small>

```{r}
fig <- plot_ly(df, x = ~package, y = ~translated_count, type = 'bar', name = 'Translated Messages')
fig <- fig %>% add_trace(y = ~untranslated_count, name = 'Untranslated Messages')
fig <- fig %>% layout(yaxis = list(title = 'Count'), barmode = 'group')
fig
```


```{js}
```